# üöá –°–∏–º—É–ª—è—Ü–∏—è AzeriMetro

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π C++ —Å–∏–º—É–ª—è—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã –ë–∞–∫–∏–Ω—Å–∫–æ–≥–æ –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ–µ–∑–¥–æ–≤ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ª–∏–Ω–∏—è—Ö, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ JSON.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è:** –ú–æ–¥–µ–ª–∏—Ä—É–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–µ–∑–¥–æ–≤ (`std::thread`). üîÑ
* **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSON:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞–Ω—Ü–∏–∏, –ª–∏–Ω–∏–∏ (Main, Purple, Lime), –º–∞—Ä—à—Ä—É—Ç—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ª–∏–Ω–∏–π (`metro_config.json`). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É nlohmann/json. üìÑ
* **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏–º–µ–Ω—è–µ—Ç `std::mutex` –∏ `std::timed_mutex` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å—Ç–∞–Ω—Ü–∏—è–º –∏ —É—á–∞—Å—Ç–∫–∞–º –ø—É—Ç–∏. üö¶
* **–î–µ—Ç–∞–ª—å–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–µ—Ç—Ä–æ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å—ã (`MetroSystem`, `MetroLine`, `MetroStation`, `Train`). üèóÔ∏è
* **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ/–û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ç–∏–ø–∞ –¥–≤–∏–∂–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–∏–Ω–∏–∏. ‚ÜîÔ∏è
* **–°—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:** –ú–æ–¥–µ–ª–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏, –∑–∞–Ω—è—Ç–æ—Å—Ç—å –ø—É—Ç–µ–π –≤ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö. üöâ
* **–°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:** –í–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ–µ–∑–¥–æ–∫ –≤ –¥–µ–ø–æ "–ë–∞–∫–º–∏–ª—å". üé≤

## üó∫Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ú–µ—Ç—Ä–æ (–≤ —Å–∏–º—É–ª—è—Ü–∏–∏)

* **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`metro_config.json`):** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
    * `stations`: –°–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π —Å `id` –∏ `name`.
    * `lines`: –°–ø–∏—Å–æ–∫ –ª–∏–Ω–∏–π (Main, Purple, Lime), –∫–∞–∂–¥–∞—è —Å:
        * `name`, `isOneWay` (–¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ/–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ), `isPurple`.
        * –ú–∞—Ä—à—Ä—É—Ç–∞–º–∏ (`initial`, `green`, `red`, `bakmil_from_green`, `bakmil_from_red`), –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–∞–∫ —Å–ø–∏—Å–∫–∏ ID —Å—Ç–∞–Ω—Ü–∏–π. –õ–∏–Ω–∏—è "Main" –∏–º–µ–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ "–∫—Ä–∞—Å–Ω—ã–π" –∏ "–∑–µ–ª–µ–Ω—ã–π" –º–∞—Ä—à—Ä—É—Ç—ã.
* **–°–≤—è–∑–∏ —Å—Ç–∞–Ω—Ü–∏–π (`MetroStation`):** –ö–∞–∂–¥–∞—è —Å—Ç–∞–Ω—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª–∏ (`std::shared_ptr`) –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é (`nextStations`) –∏ –ø—Ä–µ–¥—ã–¥—É—â—É—é (`prevStations`) —Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞. –≠—Ç–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–≤—è–∑–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è –ø—É—Ç–µ–π –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ–µ–∑–¥–æ–≤. –°—Ç–∞–Ω—Ü–∏–∏ —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç —Ñ–ª–∞–≥–∏ `isOccupiedForward` –∏ `isOccupiedBackward` –∏ –º—å—é—Ç–µ–∫—Å `std::timed_mutex`. üîó
* **–†–µ–µ—Å—Ç—Ä —Å—Ç–∞–Ω—Ü–∏–π (`Utils`):** –ì–ª–æ–±–∞–ª—å–Ω—ã–π `stationRegistry` (`std::unordered_map<int, std::shared_ptr<MetroStation>>`) –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç–∞–º —Å—Ç–∞–Ω—Ü–∏–π –ø–æ –∏—Ö ID –≤–æ –≤—Ä–µ–º—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ `MetroLine`. üóÇÔ∏è

## üöÇ –õ–æ–≥–∏–∫–∞ –ü–æ–µ–∑–¥–æ–≤ (`Train`)

* **–î–≤–∏–∂–µ–Ω–∏–µ (`move`):** –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å—Ç–∞–Ω—Ü–∏—è–º–∏.
    * **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –ü—ã—Ç–∞–µ—Ç—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º—å—é—Ç–µ–∫—Å —Å—Ç–∞–Ω—Ü–∏–∏ (`std::timed_mutex`). –ï—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥, –ø–æ–ø—ã—Ç–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ—É–¥–∞—á–Ω–æ–π. üîí
    * **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥–∏ `isOccupiedForward` –∏–ª–∏ `isOccupiedBackward`. –ï—Å–ª–∏ –ø—É—Ç—å –∑–∞–Ω—è—Ç, –ø–æ–µ–∑–¥ –æ–∂–∏–¥–∞–µ—Ç (–¥–æ 10 —Å–µ–∫—É–Ω–¥), –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—è –º—å—é—Ç–µ–∫—Å. üö¶
    * **–û—Å—Ç–∞–Ω–æ–≤–∫–∞:** –ò–º–∏—Ç–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ –≤—Ä–µ–º—è `stop_time` (3 —Å–µ–∫). ‚è±Ô∏è
    * **–í—Ä–µ–º—è –≤ –ø—É—Ç–∏:** –ò–º–∏—Ç–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞–Ω—Ü–∏–∏ (`travel_time`, 3 —Å–µ–∫). ‚è±Ô∏è
* **–ú–∞—Ä—à—Ä—É—Ç—ã (`run`, `run_purple`, `run_lime`):**
    * `run` (–õ–∏–Ω–∏—è Main): –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥-–Ω–∞–∑–∞–¥ (5 —Ü–∏–∫–ª–æ–≤). –ù–∞ –∫–æ–Ω–µ—á–Ω–æ–π —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 20% –ø–æ–µ–∑–¥–∫–∞ –≤ "–ë–∞–∫–º–∏–ª—å" (25% –∏–∑ –Ω–∏—Ö - "—Ä–µ–º–æ–Ω—Ç" —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞, 75% - –æ–±—ã—á–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º 5 —Å–µ–∫). üîÑüé≤
    * `run_purple` (–§–∏–æ–ª–µ—Ç–æ–≤–∞—è –ª–∏–Ω–∏—è): –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É (10 —Ü–∏–∫–ª–æ–≤). –í—ã–±–æ—Ä –∫–æ–Ω–µ—á–Ω–æ–π ("Hojasan"/"Avtovagzal") –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º –≤ –¥–µ–ø–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —á–µ—Ç–Ω–æ—Å—Ç–∏ `train_counter`. üîÄüî¢
    * `run_lime` (–°–∞–ª–∞—Ç–æ–≤–∞—è –ª–∏–Ω–∏—è): –ß–µ–ª–Ω–æ—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –º–µ–∂–¥—É 2 —Å—Ç–∞–Ω—Ü–∏—è–º–∏ (20 —Ü–∏–∫–ª–æ–≤). ‚ÜîÔ∏è
* **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –û–±—â–∏–π `print_mutex` –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å. üó£Ô∏è
* **–°–ª—É—á–∞–π–Ω–æ—Å—Ç—å:** `std::random_device` –∏ `std::mt19937` –¥–ª—è —Å–æ–±—ã—Ç–∏–π –Ω–∞ –ª–∏–Ω–∏–∏ Main. üé≤

## ‚≠ê –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –°–∏–º—É–ª—è—Ü–∏–∏

* **–í—Ä–µ–º—è:** –í—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (`stop_time`) –∏ –ø—É—Ç–∏ (`travel_time`) = 3 —Å–µ–∫. –û–∂–∏–¥–∞–Ω–∏–µ –≤ "–ë–∞–∫–º–∏–ª—å" (`bakmil_wait_time`) = 5 —Å–µ–∫. ‚è±Ô∏è
* **–û—Å–æ–±–∞—è —Ä–æ–ª—å —Å—Ç–∞–Ω—Ü–∏–∏ "–ë–∞–∫–º–∏–ª—å":** –°–ª—É–∂–∏—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π/–∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–æ–π (–ª–∏–Ω–∏—è Main) –∏ –º–µ—Å—Ç–æ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (20% —à–∞–Ω—Å). –ü–æ–µ–∑–¥–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å "—Ä–µ–º–æ–Ω—Ç–Ω–æ–π" (25%, –ø–æ–µ–∑–¥ —É–¥–∞–ª—è–µ—Ç—Å—è) –∏–ª–∏ "–æ–±—ã—á–Ω–æ–π" (75%, –º–∞—à–∏–Ω–∏—Å—Ç "–ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ö–≤–æ—Å—Ç", –ø–æ–µ–∑–¥ –∂–¥–µ—Ç 5 —Å–µ–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –º–∞—Ä—à—Ä—É—Ç). üõ†Ô∏èüîÑ
* **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω–∏–π:** –ú–æ–¥–µ–ª–∏—Ä—É—é—Ç—Å—è 3 –ª–∏–Ω–∏–∏: —Å–ª–æ–∂–Ω–∞—è –ì–ª–∞–≤–Ω–∞—è, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –∏ –∫–æ—Ä–æ—Ç–∫–∞—è –æ–¥–Ω–æ–ø—É—Ç–Ω–∞—è –°–∞–ª–∞—Ç–æ–≤–∞—è. üó∫Ô∏è
* **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø–æ–µ–∑–¥–æ–≤:** –ê—Ç–æ–º–∞—Ä–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ (`train_counter`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–µ–∑–¥–æ–≤ –§–∏–æ–ª–µ—Ç–æ–≤–æ–π –ª–∏–Ω–∏–∏. üî¢
* **–ó–∞–ø—É—Å–∫:** –°–∏–º—É–ª—è—Ü–∏—è —Å—Ç–∞—Ä—Ç—É–µ—Ç —Å 6 –ø–æ–µ–∑–¥–∞–º–∏ –Ω–∞ –ì–ª–∞–≤–Ω–æ–π –ª–∏–Ω–∏–∏, 4 –Ω–∞ –§–∏–æ–ª–µ—Ç–æ–≤–æ–π –∏ 2 –Ω–∞ –°–∞–ª–∞—Ç–æ–≤–æ–π. üö¶
* **–û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —É—á–∞—Å—Ç–∫–∏:** –°—Ç–∞–Ω—Ü–∏—è "Hojasan" –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è (–∑–∞–¥–∞–µ—Ç—Å—è –≤ `MetroSystem.cpp`). ‚û°Ô∏è
* **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–µ–∫—Ç –Ω–∞–∑–≤–∞–Ω `AzeriMetro` (`CMakeLists.txt`). üá¶üáø

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++20
* CMake (–≤–µ—Ä—Å–∏—è 3.10 –∏–ª–∏ –≤—ã—à–µ)

## üõ†Ô∏è –°–±–æ—Ä–∫–∞

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω CMake –∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä C++20.
2.  –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–±–æ—Ä–∫–∏:
    ```bash
    mkdir build
    cd build
    ```
3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ CMake –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:
    ```bash
    cmake ..
    ```
4.  –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
    ```bash
    cmake --build .
    ```
    –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `AzeriMetro` (–∏–ª–∏ `AzeriMetro.exe` –≤ Windows) –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `build`.

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `metro_config.json` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —á—Ç–æ –∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª. üìÑ‚û°Ô∏èüìÇ
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `build`:
    ```bash
    ./AzeriMetro
    ```
    –ò–ª–∏ –≤ Windows:
    ```cmd
    .\AzeriMetro.exe
    ```

–°–∏–º—É–ª—è—Ü–∏—è –Ω–∞—á–Ω–µ—Ç—Å—è. –í –∫–æ–Ω—Å–æ–ª—å –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ–µ–∑–¥–æ–≤. üöÄ
